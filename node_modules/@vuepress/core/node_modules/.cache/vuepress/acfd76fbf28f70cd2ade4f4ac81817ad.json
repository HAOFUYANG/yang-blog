{"remainingRequest":"/Users/haofuyang/Desktop/yang-blog/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/haofuyang/Desktop/yang-blog/node_modules/vuepress-theme-vt/plugins/fulltext-search/services/flexsearchSvc.js","dependencies":[{"path":"/Users/haofuyang/Desktop/yang-blog/node_modules/vuepress-theme-vt/plugins/fulltext-search/services/flexsearchSvc.js","mtime":1658561763877},{"path":"/Users/haofuyang/Desktop/yang-blog/node_modules/cache-loader/dist/cjs.js","mtime":1658561742978},{"path":"/Users/haofuyang/Desktop/yang-blog/node_modules/babel-loader/lib/index.js","mtime":1658561742936}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvaGFvZnV5YW5nL0Rlc2t0b3AveWFuZy1ibG9nL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvaGFvZnV5YW5nL0Rlc2t0b3AveWFuZy1ibG9nL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2hhb2Z1eWFuZy9EZXNrdG9wL3lhbmctYmxvZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNlYXJjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZsYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS51bnNjb3BhYmxlcy5mbGF0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmV2ZXJ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubGFzdC1pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgRmxleHNlYXJjaCBmcm9tICJmbGV4c2VhcmNoIjsgLy8gVXNlIHdoZW4gZmxleFNlYXJjaCB2MC43LjAgd2lsbCBiZSBhdmFpbGFibGUKLy8gaW1wb3J0IGN5cmlsbGljQ2hhcnNldCBmcm9tICdmbGV4c2VhcmNoL2Rpc3QvbGFuZy9jeXJpbGxpYy9kZWZhdWx0Lm1pbi5qcycKLy8gaW1wb3J0IGNqa0NoYXJzZXQgZnJvbSAnZmxleHNlYXJjaC9kaXN0L2xhbmcvY2prL2RlZmF1bHQubWluLmpzJwoKaW1wb3J0IF8gZnJvbSAibG9kYXNoIjsKdmFyIGluZGV4ID0gbnVsbDsKdmFyIGN5cmlsbGljSW5kZXggPSBudWxsOwp2YXIgY2prSW5kZXggPSBudWxsOwp2YXIgcGFnZXNCeVBhdGggPSBudWxsOwp2YXIgY2prUmVnZXggPSAvW1x8XHUzMTMxLVx1MzE2M1x1QUMwMC1cdUQ3QTNdfFtcdTM0MDAtXHU0REI1XHU0RTAwLVx1OUZDQ1x1RkEwRVx1RkEwRlx1RkExMVx1RkExM1x1RkExNFx1RkExRlx1RkEyMVx1RkEyM1x1RkEyNFx1RkEyNy1cdUZBMjldfCg/OltcdUQ4NDAtXHVEODY4XSg/IVtcdURDMDAtXHVERkZGXSkpKD86KD86W15cdUQ4MDAtXHVEQkZGXXxeKVtcdURDMDAtXHVERkZGXSl8KD86XHVEODY5KD8hW1x1REMwMC1cdURGRkZdKSkoPzooPzpbXlx1RDgwMC1cdURCRkZdfF4pW1x1REMwMC1cdURFRDZcdURGMDAtXHVERkZGXSl8KD86W1x1RDg2QS1cdUQ4NkNdKD8hW1x1REMwMC1cdURGRkZdKSkoPzooPzpbXlx1RDgwMC1cdURCRkZdfF4pW1x1REMwMC1cdURGRkZdKXwoPzpcdUQ4NkQoPyFbXHVEQzAwLVx1REZGRl0pKSg/Oig/OlteXHVEODAwLVx1REJGRl18XilbXHVEQzAwLVx1REYzNFx1REY0MC1cdURGRkZdKXwoPzpcdUQ4NkUoPyFbXHVEQzAwLVx1REZGRl0pKSg/Oig/OlteXHVEODAwLVx1REJGRl18XilbXHVEQzAwLVx1REMxRF0pfFtcdTMwNDEtXHUzMDk2XXxbXHUzMEExLVx1MzBGQV0vZ2k7CmV4cG9ydCBkZWZhdWx0IHsKICBidWlsZEluZGV4OiBmdW5jdGlvbiBidWlsZEluZGV4KGFsbFBhZ2VzLCBvcHRpb25zKSB7CiAgICB2YXIgcGFnZXMgPSBhbGxQYWdlcy5maWx0ZXIoZnVuY3Rpb24gKHApIHsKICAgICAgcmV0dXJuICFwLmZyb250bWF0dGVyIHx8IHAuZnJvbnRtYXR0ZXIuc2VhcmNoICE9PSBmYWxzZTsKICAgIH0pOwogICAgdmFyIGluZGV4U2V0dGluZ3MgPSB7CiAgICAgIGVuY29kZTogb3B0aW9ucy5lbmNvZGUgfHwgInNpbXBsZSIsCiAgICAgIHRva2VuaXplOiBvcHRpb25zLnRva2VuaXplIHx8ICJmb3J3YXJkIiwKICAgICAgc3BsaXQ6IG9wdGlvbnMuc3BsaXQgfHwgL1xXKy8sCiAgICAgIGFzeW5jOiB0cnVlLAogICAgICBkb2M6IHsKICAgICAgICBpZDogImtleSIsCiAgICAgICAgLy8gaGVyZSB5b3UgY2hvb3NlIHRoZSBmaWVsZHMgeW91IHdhbnQgdG8gaW5kZXguCiAgICAgICAgLy8gZm9yIG1lIEkgd2lsbCBzZWFyY2ggaW4gdGhlIHRpdGxlIGFuZCB0aGUgY29udGVudCBvZiBlYWNoIHBhZ2UuCiAgICAgICAgLy8gb2YgY291cnNlIEkgc3RyaXBwZWQgdGhlIGNvbnRlbnQgYmVmb3JlIHNvIEkgdXNlIHRoZSBwbGFpbiB0ZXh0IGNvbnRlbnQgbm90IHRoZSBtYXJrZG93biB0ZXh0CiAgICAgICAgZmllbGQ6IFsidGl0bGUiLCAiaGVhZGVyc1N0ciIsICJjb250ZW50Il0KICAgICAgfQogICAgfTsKICAgIGluZGV4ID0gbmV3IEZsZXhzZWFyY2goaW5kZXhTZXR0aW5ncyk7CiAgICBpbmRleC5hZGQocGFnZXMpOwogICAgdmFyIGN5cmlsbGljUGFnZXMgPSBwYWdlcy5maWx0ZXIoZnVuY3Rpb24gKHApIHsKICAgICAgcmV0dXJuIHAuY2hhcnNldHMuY3lyaWxsaWM7CiAgICB9KTsKICAgIHZhciBjamtQYWdlcyA9IHBhZ2VzLmZpbHRlcihmdW5jdGlvbiAocCkgewogICAgICByZXR1cm4gcC5jaGFyc2V0cy5jams7CiAgICB9KTsKCiAgICBpZiAoY3lyaWxsaWNQYWdlcy5sZW5ndGgpIHsKICAgICAgY3lyaWxsaWNJbmRleCA9IG5ldyBGbGV4c2VhcmNoKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaW5kZXhTZXR0aW5ncyksIHt9LCB7CiAgICAgICAgZW5jb2RlOiAiaWNhc2UiLAogICAgICAgIHNwbGl0OiAvXHMrLywKICAgICAgICB0b2tlbml6ZTogImZvcndhcmQiCiAgICAgIH0pKTsKICAgICAgY3lyaWxsaWNJbmRleC5hZGQoY3lyaWxsaWNQYWdlcyk7CiAgICB9CgogICAgaWYgKGNqa1BhZ2VzLmxlbmd0aCkgewogICAgICBjamtJbmRleCA9IG5ldyBGbGV4c2VhcmNoKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaW5kZXhTZXR0aW5ncyksIHt9LCB7CiAgICAgICAgZW5jb2RlOiBmYWxzZSwKICAgICAgICB0b2tlbml6ZTogZnVuY3Rpb24gdG9rZW5pemUoc3RyKSB7CiAgICAgICAgICB2YXIgY2prV29yZHMgPSBbXTsKICAgICAgICAgIHZhciBtID0gbnVsbDsKCiAgICAgICAgICBkbyB7CiAgICAgICAgICAgIG0gPSBjamtSZWdleC5leGVjKHN0cik7CgogICAgICAgICAgICBpZiAobSkgewogICAgICAgICAgICAgIGNqa1dvcmRzLnB1c2gobVswXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gd2hpbGUgKG0pOwoKICAgICAgICAgIHJldHVybiBjamtXb3JkczsKICAgICAgICB9CiAgICAgIH0pKTsKICAgICAgY2prSW5kZXguYWRkKGNqa1BhZ2VzKTsKICAgIH0KCiAgICBwYWdlc0J5UGF0aCA9IF8ua2V5QnkocGFnZXMsICJwYXRoIik7CiAgfSwKICBtYXRjaDogZnVuY3Rpb24gbWF0Y2gocXVlcnlTdHJpbmcsIHF1ZXJ5VGVybXMpIHsKICAgIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGxpbWl0LCBzZWFyY2hQYXJhbXMsIHNlYXJjaFJlc3VsdDEsIHNlYXJjaFJlc3VsdDIsIHNlYXJjaFJlc3VsdDMsIHNlYXJjaFJlc3VsdCwgcmVzdWx0LCByZXN1bHRCeVBhcmVudDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGxpbWl0ID0gX2FyZ3VtZW50cy5sZW5ndGggPiAyICYmIF9hcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHNbMl0gOiA3OwogICAgICAgICAgICAgIHNlYXJjaFBhcmFtcyA9IFt7CiAgICAgICAgICAgICAgICBmaWVsZDogInRpdGxlIiwKICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVN0cmluZywKICAgICAgICAgICAgICAgIGxpbWl0OiBsaW1pdCwKICAgICAgICAgICAgICAgIGJvb3N0OiAxMAogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGZpZWxkOiAiaGVhZGVyc1N0ciIsCiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlTdHJpbmcsCiAgICAgICAgICAgICAgICBsaW1pdDogbGltaXQsCiAgICAgICAgICAgICAgICBib29zdDogNwogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGZpZWxkOiAiY29udGVudCIsCiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlTdHJpbmcsCiAgICAgICAgICAgICAgICBsaW1pdDogbGltaXQKICAgICAgICAgICAgICB9XTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gaW5kZXguc2VhcmNoKHNlYXJjaFBhcmFtcyk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgc2VhcmNoUmVzdWx0MSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIGlmICghY3lyaWxsaWNJbmRleCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gY3lyaWxsaWNJbmRleC5zZWFyY2goc2VhcmNoUGFyYW1zKTsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IFtdOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBzZWFyY2hSZXN1bHQyID0gX2NvbnRleHQudDA7CgogICAgICAgICAgICAgIGlmICghY2prSW5kZXgpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE2OwogICAgICAgICAgICAgIHJldHVybiBjamtJbmRleC5zZWFyY2goc2VhcmNoUGFyYW1zKTsKCiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgX2NvbnRleHQudDEgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgX2NvbnRleHQudDEgPSBbXTsKCiAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgc2VhcmNoUmVzdWx0MyA9IF9jb250ZXh0LnQxOwogICAgICAgICAgICAgIHNlYXJjaFJlc3VsdCA9IF8udW5pcUJ5KFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc2VhcmNoUmVzdWx0MSksIF90b0NvbnN1bWFibGVBcnJheShzZWFyY2hSZXN1bHQyKSwgX3RvQ29uc3VtYWJsZUFycmF5KHNlYXJjaFJlc3VsdDMpKSwgInBhdGgiKTsKICAgICAgICAgICAgICByZXN1bHQgPSBzZWFyY2hSZXN1bHQubWFwKGZ1bmN0aW9uIChwYWdlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwYWdlKSwge30sIHsKICAgICAgICAgICAgICAgICAgcGFyZW50UGFnZVRpdGxlOiBnZXRQYXJlbnRQYWdlVGl0bGUocGFnZSkKICAgICAgICAgICAgICAgIH0sIGdldEFkZGl0aW9uYWxJbmZvKHBhZ2UsIG5vcm1hbGl6ZVN0cmluZyhxdWVyeVN0cmluZyksIHF1ZXJ5VGVybXMpKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByZXN1bHRCeVBhcmVudCA9IF8uZ3JvdXBCeShyZXN1bHQsICJwYXJlbnRQYWdlVGl0bGUiKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfLnZhbHVlcyhyZXN1bHRCeVBhcmVudCkubWFwKGZ1bmN0aW9uIChhcnIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBhcnIubWFwKGZ1bmN0aW9uICh4LCBpKSB7CiAgICAgICAgICAgICAgICAgIGlmIChpID09PSAwKSByZXR1cm4geDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgeCksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgcGFyZW50UGFnZVRpdGxlOiBudWxsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSkuZmxhdCgpKTsKCiAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBub3JtYWxpemVTdHJpbmc6IG5vcm1hbGl6ZVN0cmluZwp9OwoKZnVuY3Rpb24gZ2V0UGFyZW50UGFnZVRpdGxlKHBhZ2UpIHsKICB2YXIgcGF0aFBhcnRzID0gcGFnZS5wYXRoLnNwbGl0KCIvIik7CiAgdmFyIHBhcmVudFBhZ2VQYXRoID0gIi8iOwogIGlmIChwYXRoUGFydHNbMV0pIHBhcmVudFBhZ2VQYXRoID0gIi8iLmNvbmNhdChwYXRoUGFydHNbMV0sICIvIik7CiAgdmFyIHBhcmVudFBhZ2UgPSBwYWdlc0J5UGF0aFtwYXJlbnRQYWdlUGF0aF0gfHwgcGFnZTsKICByZXR1cm4gcGFyZW50UGFnZS50aXRsZTsKfQoKZnVuY3Rpb24gZ2V0QWRkaXRpb25hbEluZm8ocGFnZSwgcXVlcnlTdHJpbmcsIHF1ZXJ5VGVybXMpIHsKICB2YXIgcXVlcnkgPSBxdWVyeVN0cmluZy50b0xvd2VyQ2FzZSgpOwogIHZhciBtYXRjaCA9IGdldE1hdGNoKHBhZ2UsIHF1ZXJ5LCBxdWVyeVRlcm1zKTsKICBpZiAoIW1hdGNoKSByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBnZXRGdWxsSGVhZGluZyhwYWdlKSksIHt9LCB7CiAgICBzbHVnOiAiIiwKICAgIGNvbnRlbnRTdHI6IG51bGwKICB9KTsKCiAgaWYgKG1hdGNoLmhlYWRlckluZGV4ICE9IG51bGwpIHsKICAgIC8vIGhlYWRlciBtYXRjaAogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZ2V0RnVsbEhlYWRpbmcocGFnZSwgbWF0Y2guaGVhZGVySW5kZXgsIG1hdGNoKSksIHt9LCB7CiAgICAgIHNsdWc6ICIjIiArIHBhZ2UuaGVhZGVyc1ttYXRjaC5oZWFkZXJJbmRleF0uc2x1ZywKICAgICAgY29udGVudFN0cjogbnVsbAogICAgfSk7CiAgfSAvLyBjb250ZW50IG1hdGNoCgoKICB2YXIgaGVhZGVySW5kZXggPSBfLmZpbmRMYXN0SW5kZXgocGFnZS5oZWFkZXJzIHx8IFtdLCBmdW5jdGlvbiAoaCkgewogICAgcmV0dXJuIGguY2hhckluZGV4ICE9IG51bGwgJiYgaC5jaGFySW5kZXggPCBtYXRjaC5jaGFySW5kZXg7CiAgfSk7CgogIGlmIChoZWFkZXJJbmRleCA9PT0gLTEpIGhlYWRlckluZGV4ID0gbnVsbDsKICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBnZXRGdWxsSGVhZGluZyhwYWdlLCBoZWFkZXJJbmRleCkpLCB7fSwgewogICAgc2x1ZzogaGVhZGVySW5kZXggPT0gbnVsbCA/ICIiIDogIiMiICsgcGFnZS5oZWFkZXJzW2hlYWRlckluZGV4XS5zbHVnCiAgfSwgZ2V0Q29udGVudFN0cihwYWdlLCBtYXRjaCkpOwp9CgpmdW5jdGlvbiBnZXRGdWxsSGVhZGluZyhwYWdlLCBoZWFkZXJJbmRleCwgbWF0Y2gpIHsKICBpZiAoaGVhZGVySW5kZXggPT0gbnVsbCkgcmV0dXJuIHsKICAgIGhlYWRpbmdTdHI6IHBhZ2UudGl0bGUKICB9OwogIHZhciBoZWFkZXJzUGF0aCA9IFtdOwoKICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcCgpIHsKICAgIHZhciBoZWFkZXIgPSBwYWdlLmhlYWRlcnNbaGVhZGVySW5kZXhdOwogICAgaGVhZGVyc1BhdGgudW5zaGlmdChoZWFkZXIpOwogICAgaGVhZGVySW5kZXggPSBfLmZpbmRMYXN0SW5kZXgocGFnZS5oZWFkZXJzLCBmdW5jdGlvbiAoaCkgewogICAgICByZXR1cm4gaC5sZXZlbCA9PT0gaGVhZGVyLmxldmVsIC0gMTsKICAgIH0sIGhlYWRlckluZGV4IC0gMSk7CiAgICBpZiAoaGVhZGVySW5kZXggPT09IC0xKSBoZWFkZXJJbmRleCA9IG51bGw7CiAgfTsKCiAgd2hpbGUgKGhlYWRlckluZGV4ICE9IG51bGwpIHsKICAgIF9sb29wKCk7CiAgfQoKICB2YXIgaGVhZGluZ1N0ciA9IGhlYWRlcnNQYXRoLm1hcChmdW5jdGlvbiAoaCkgewogICAgcmV0dXJuIGgudGl0bGU7CiAgfSkuam9pbigiID4gIik7CiAgdmFyIHByZWZpeFBhdGggPSBoZWFkZXJzUGF0aC5zbGljZSgwLCAtMSk7CiAgdmFyIHByZWZpeExlbmd0aCA9IF8uc3VtKHByZWZpeFBhdGgubWFwKGZ1bmN0aW9uIChwKSB7CiAgICByZXR1cm4gKHAudGl0bGUgfHwgIiIpLmxlbmd0aDsKICB9KSkgKyBwcmVmaXhQYXRoLmxlbmd0aCAqIDM7CiAgdmFyIGhlYWRpbmdIaWdobGlnaHQgPSBtYXRjaCAmJiBtYXRjaC5oZWFkZXJJbmRleCAhPSBudWxsICYmIFttYXRjaC5jaGFySW5kZXggKyBwcmVmaXhMZW5ndGgsIG1hdGNoLnRlcm1MZW5ndGhdOwogIHJldHVybiB7CiAgICBoZWFkaW5nU3RyOiBoZWFkaW5nU3RyLAogICAgaGVhZGluZ0hpZ2hsaWdodDogaGVhZGluZ0hpZ2hsaWdodAogIH07Cn0KCmZ1bmN0aW9uIGdldE1hdGNoKHBhZ2UsIHF1ZXJ5LCB0ZXJtcykgewogIHZhciBtYXRjaGVzID0gdGVybXMubWFwKGZ1bmN0aW9uICh0KSB7CiAgICByZXR1cm4gZ2V0SGVhZGVyTWF0Y2gocGFnZSwgdCkgfHwgZ2V0Q29udGVudE1hdGNoKHBhZ2UsIHQpOwogIH0pLmZpbHRlcihmdW5jdGlvbiAobSkgewogICAgcmV0dXJuIG07CiAgfSk7CiAgaWYgKG1hdGNoZXMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDsKCiAgaWYgKG1hdGNoZXMuZXZlcnkoZnVuY3Rpb24gKG0pIHsKICAgIHJldHVybiBtLmhlYWRlckluZGV4ICE9IG51bGw7CiAgfSkpIHsKICAgIHJldHVybiBnZXRIZWFkZXJNYXRjaChwYWdlLCBxdWVyeSkgfHwgbWF0Y2hlc1swXTsKICB9CgogIHJldHVybiBnZXRDb250ZW50TWF0Y2gocGFnZSwgcXVlcnkpIHx8IG1hdGNoZXMuZmluZChmdW5jdGlvbiAobSkgewogICAgcmV0dXJuIG0uaGVhZGVySW5kZXggPT0gbnVsbDsKICB9KTsKfQoKZnVuY3Rpb24gZ2V0SGVhZGVyTWF0Y2gocGFnZSwgdGVybSkgewogIGlmICghcGFnZS5oZWFkZXJzKSByZXR1cm4gbnVsbDsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWdlLmhlYWRlcnMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBoID0gcGFnZS5oZWFkZXJzW2ldOwogICAgdmFyIGNoYXJJbmRleCA9IGgubm9ybWFsaXplZFRpdGxlLmluZGV4T2YodGVybSk7CiAgICBpZiAoY2hhckluZGV4ID09PSAtMSkgY29udGludWU7CiAgICByZXR1cm4gewogICAgICBoZWFkZXJJbmRleDogaSwKICAgICAgY2hhckluZGV4OiBjaGFySW5kZXgsCiAgICAgIHRlcm1MZW5ndGg6IHRlcm0ubGVuZ3RoCiAgICB9OwogIH0KCiAgcmV0dXJuIG51bGw7Cn0KCmZ1bmN0aW9uIGdldENvbnRlbnRNYXRjaChwYWdlLCB0ZXJtKSB7CiAgaWYgKCFwYWdlLm5vcm1hbGl6ZWRDb250ZW50KSByZXR1cm4gbnVsbDsKICB2YXIgY2hhckluZGV4ID0gcGFnZS5ub3JtYWxpemVkQ29udGVudC5pbmRleE9mKHRlcm0pOwogIGlmIChjaGFySW5kZXggPT09IC0xKSByZXR1cm4gbnVsbDsKICByZXR1cm4gewogICAgaGVhZGVySW5kZXg6IG51bGwsCiAgICBjaGFySW5kZXg6IGNoYXJJbmRleCwKICAgIHRlcm1MZW5ndGg6IHRlcm0ubGVuZ3RoCiAgfTsKfQoKZnVuY3Rpb24gZ2V0Q29udGVudFN0cihwYWdlLCBtYXRjaCkgewogIHZhciBzbmlwcGV0TGVuZ3RoID0gMTIwOwogIHZhciBjaGFySW5kZXggPSBtYXRjaC5jaGFySW5kZXgsCiAgICAgIHRlcm1MZW5ndGggPSBtYXRjaC50ZXJtTGVuZ3RoOwogIHZhciBsaW5lU3RhcnRJbmRleCA9IHBhZ2UuY29udGVudC5sYXN0SW5kZXhPZigiXG4iLCBjaGFySW5kZXgpOwogIHZhciBsaW5lRW5kSW5kZXggPSBwYWdlLmNvbnRlbnQuaW5kZXhPZigiXG4iLCBjaGFySW5kZXgpOwogIGlmIChsaW5lU3RhcnRJbmRleCA9PT0gLTEpIGxpbmVTdGFydEluZGV4ID0gMDsKICBpZiAobGluZUVuZEluZGV4ID09PSAtMSkgbGluZUVuZEluZGV4ID0gcGFnZS5jb250ZW50Lmxlbmd0aDsKICB2YXIgbGluZSA9IHBhZ2UuY29udGVudC5zbGljZShsaW5lU3RhcnRJbmRleCwgbGluZUVuZEluZGV4KTsKICB2YXIgbGluZUNoYXJJbmRleCA9IGNoYXJJbmRleCAtIGxpbmVTdGFydEluZGV4OwogIHZhciBjb250ZW50SGlnaGxpZ2h0ID0gW2xpbmVDaGFySW5kZXgsIHRlcm1MZW5ndGhdOwogIGlmIChzbmlwcGV0TGVuZ3RoID49IGxpbmUubGVuZ3RoKSByZXR1cm4gewogICAgY29udGVudFN0cjogbGluZSwKICAgIGNvbnRlbnRIaWdobGlnaHQ6IGNvbnRlbnRIaWdobGlnaHQKICB9OwoKICB2YXIgYWRkaXRpb25hbENoYXJhY3RlcnNGcm9tU3RhcnQgPSBfLnJvdW5kKChzbmlwcGV0TGVuZ3RoIC0gdGVybUxlbmd0aCkgLyAyKTsKCiAgdmFyIHNuaXBwZXRTdGFydCA9IE1hdGgubWF4KGxpbmVDaGFySW5kZXggLSBhZGRpdGlvbmFsQ2hhcmFjdGVyc0Zyb21TdGFydCwgMCk7CiAgdmFyIHNuaXBwZXRFbmQgPSBNYXRoLm1pbihzbmlwcGV0U3RhcnQgKyBzbmlwcGV0TGVuZ3RoLCBsaW5lLmxlbmd0aCk7CiAgdmFyIGNvbnRlbnRTdHIgPSBsaW5lLnNsaWNlKHNuaXBwZXRTdGFydCwgc25pcHBldEVuZCk7CiAgY29udGVudEhpZ2hsaWdodFswXSA9IGNvbnRlbnRIaWdobGlnaHRbMF0gLSBzbmlwcGV0U3RhcnQ7CgogIGlmIChzbmlwcGV0U3RhcnQgPiAwKSB7CiAgICBjb250ZW50U3RyID0gIi4uLiIgKyBjb250ZW50U3RyOwogICAgY29udGVudEhpZ2hsaWdodFswXSA9IGNvbnRlbnRIaWdobGlnaHRbMF0gKyAzOwogIH0KCiAgaWYgKHNuaXBwZXRFbmQgPCBsaW5lLmxlbmd0aCkgY29udGVudFN0ciA9IGNvbnRlbnRTdHIgKyAiLi4uIjsKICByZXR1cm4gewogICAgY29udGVudFN0cjogY29udGVudFN0ciwKICAgIGNvbnRlbnRIaWdobGlnaHQ6IGNvbnRlbnRIaWdobGlnaHQKICB9Owp9CgpmdW5jdGlvbiBub3JtYWxpemVTdHJpbmcoc3RyKSB7CiAgaWYgKCFzdHIpIHJldHVybiBzdHI7CiAgcmV0dXJuIHN0ci50cmltKCkudG9Mb3dlckNhc2UoKS5ub3JtYWxpemUoIk5GRCIpLnJlcGxhY2UoL1tcdTAzMDAtXHUwMzZmXS9nLCAiIik7Cn0="},{"version":3,"sources":["/Users/haofuyang/Desktop/yang-blog/node_modules/vuepress-theme-vt/plugins/fulltext-search/services/flexsearchSvc.js"],"names":["Flexsearch","_","index","cyrillicIndex","cjkIndex","pagesByPath","cjkRegex","buildIndex","allPages","options","pages","filter","p","frontmatter","search","indexSettings","encode","tokenize","split","async","doc","id","field","add","cyrillicPages","charsets","cyrillic","cjkPages","cjk","length","str","cjkWords","m","exec","push","keyBy","match","queryString","queryTerms","limit","searchParams","query","boost","searchResult1","searchResult2","searchResult3","searchResult","uniqBy","result","map","page","parentPageTitle","getParentPageTitle","getAdditionalInfo","normalizeString","resultByParent","groupBy","values","arr","x","i","flat","pathParts","path","parentPagePath","parentPage","title","toLowerCase","getMatch","getFullHeading","slug","contentStr","headerIndex","headers","findLastIndex","h","charIndex","getContentStr","headingStr","headersPath","header","unshift","level","join","prefixPath","slice","prefixLength","sum","headingHighlight","termLength","terms","matches","t","getHeaderMatch","getContentMatch","every","find","term","normalizedTitle","indexOf","normalizedContent","snippetLength","lineStartIndex","content","lastIndexOf","lineEndIndex","line","lineCharIndex","contentHighlight","additionalCharactersFromStart","round","snippetStart","Math","max","snippetEnd","min","trim","normalize","replace"],"mappings":"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","sourcesContent":["import Flexsearch from \"flexsearch\";\n// Use when flexSearch v0.7.0 will be available\n// import cyrillicCharset from 'flexsearch/dist/lang/cyrillic/default.min.js'\n// import cjkCharset from 'flexsearch/dist/lang/cjk/default.min.js'\nimport _ from \"lodash\";\n\nlet index = null;\nlet cyrillicIndex = null;\nlet cjkIndex = null;\nlet pagesByPath = null;\n\nconst cjkRegex =\n  /[\\u3131-\\u314e|\\u314f-\\u3163|\\uac00-\\ud7a3]|[\\u4E00-\\u9FCC\\u3400-\\u4DB5\\uFA0E\\uFA0F\\uFA11\\uFA13\\uFA14\\uFA1F\\uFA21\\uFA23\\uFA24\\uFA27-\\uFA29]|[\\ud840-\\ud868][\\udc00-\\udfff]|\\ud869[\\udc00-\\uded6\\udf00-\\udfff]|[\\ud86a-\\ud86c][\\udc00-\\udfff]|\\ud86d[\\udc00-\\udf34\\udf40-\\udfff]|\\ud86e[\\udc00-\\udc1d]|[\\u3041-\\u3096]|[\\u30A1-\\u30FA]/giu;\n\nexport default {\n  buildIndex(allPages, options) {\n    const pages = allPages.filter(\n      (p) => !p.frontmatter || p.frontmatter.search !== false\n    );\n    const indexSettings = {\n      encode: options.encode || \"simple\",\n      tokenize: options.tokenize || \"forward\",\n      split: options.split || /\\W+/,\n      async: true,\n      doc: {\n        id: \"key\",\n        // here you choose the fields you want to index.\n        // for me I will search in the title and the content of each page.\n        // of course I stripped the content before so I use the plain text content not the markdown text\n        field: [\"title\", \"headersStr\", \"content\"],\n      },\n    };\n    index = new Flexsearch(indexSettings);\n    index.add(pages);\n\n    const cyrillicPages = pages.filter((p) => p.charsets.cyrillic);\n    const cjkPages = pages.filter((p) => p.charsets.cjk);\n\n    if (cyrillicPages.length) {\n      cyrillicIndex = new Flexsearch({\n        ...indexSettings,\n        encode: \"icase\",\n        split: /\\s+/,\n        tokenize: \"forward\",\n      });\n      cyrillicIndex.add(cyrillicPages);\n    }\n    if (cjkPages.length) {\n      cjkIndex = new Flexsearch({\n        ...indexSettings,\n        encode: false,\n        tokenize: function (str) {\n          const cjkWords = [];\n          let m = null;\n          do {\n            m = cjkRegex.exec(str);\n            if (m) {\n              cjkWords.push(m[0]);\n            }\n          } while (m);\n          return cjkWords;\n        },\n      });\n      cjkIndex.add(cjkPages);\n    }\n    pagesByPath = _.keyBy(pages, \"path\");\n  },\n  async match(queryString, queryTerms, limit = 7) {\n    const searchParams = [\n      {\n        field: \"title\",\n        query: queryString,\n        limit,\n        boost: 10,\n      },\n      {\n        field: \"headersStr\",\n        query: queryString,\n        limit,\n        boost: 7,\n      },\n      {\n        field: \"content\",\n        query: queryString,\n        limit,\n      },\n    ];\n    const searchResult1 = await index.search(searchParams);\n    const searchResult2 = cyrillicIndex\n      ? await cyrillicIndex.search(searchParams)\n      : [];\n    const searchResult3 = cjkIndex ? await cjkIndex.search(searchParams) : [];\n    const searchResult = _.uniqBy(\n      [...searchResult1, ...searchResult2, ...searchResult3],\n      \"path\"\n    );\n    const result = searchResult.map((page) => ({\n      ...page,\n      parentPageTitle: getParentPageTitle(page),\n      ...getAdditionalInfo(page, normalizeString(queryString), queryTerms),\n    }));\n\n    const resultByParent = _.groupBy(result, \"parentPageTitle\");\n    return _.values(resultByParent)\n      .map((arr) =>\n        arr.map((x, i) => {\n          if (i === 0) return x;\n          return { ...x, parentPageTitle: null };\n        })\n      )\n      .flat();\n  },\n  normalizeString,\n};\n\nfunction getParentPageTitle(page) {\n  const pathParts = page.path.split(\"/\");\n  let parentPagePath = \"/\";\n  if (pathParts[1]) parentPagePath = `/${pathParts[1]}/`;\n\n  const parentPage = pagesByPath[parentPagePath] || page;\n  return parentPage.title;\n}\n\nfunction getAdditionalInfo(page, queryString, queryTerms) {\n  const query = queryString.toLowerCase();\n  const match = getMatch(page, query, queryTerms);\n  if (!match)\n    return {\n      ...getFullHeading(page),\n      slug: \"\",\n      contentStr: null,\n    };\n\n  if (match.headerIndex != null) {\n    // header match\n    return {\n      ...getFullHeading(page, match.headerIndex, match),\n      slug: \"#\" + page.headers[match.headerIndex].slug,\n      contentStr: null,\n    };\n  }\n\n  // content match\n  let headerIndex = _.findLastIndex(\n    page.headers || [],\n    (h) => h.charIndex != null && h.charIndex < match.charIndex\n  );\n  if (headerIndex === -1) headerIndex = null;\n\n  return {\n    ...getFullHeading(page, headerIndex),\n    slug: headerIndex == null ? \"\" : \"#\" + page.headers[headerIndex].slug,\n    ...getContentStr(page, match),\n  };\n}\n\nfunction getFullHeading(page, headerIndex, match) {\n  if (headerIndex == null) return { headingStr: page.title };\n  const headersPath = [];\n  while (headerIndex != null) {\n    const header = page.headers[headerIndex];\n    headersPath.unshift(header);\n    headerIndex = _.findLastIndex(\n      page.headers,\n      (h) => h.level === header.level - 1,\n      headerIndex - 1\n    );\n    if (headerIndex === -1) headerIndex = null;\n  }\n\n  const headingStr = headersPath.map((h) => h.title).join(\" > \");\n  const prefixPath = headersPath.slice(0, -1);\n  const prefixLength =\n    _.sum(prefixPath.map((p) => (p.title || \"\").length)) +\n    prefixPath.length * 3;\n  const headingHighlight = match &&\n    match.headerIndex != null && [\n      match.charIndex + prefixLength,\n      match.termLength,\n    ];\n  return { headingStr, headingHighlight };\n}\n\nfunction getMatch(page, query, terms) {\n  const matches = terms\n    .map((t) => {\n      return getHeaderMatch(page, t) || getContentMatch(page, t);\n    })\n    .filter((m) => m);\n  if (matches.length === 0) return null;\n\n  if (matches.every((m) => m.headerIndex != null)) {\n    return getHeaderMatch(page, query) || matches[0];\n  }\n\n  return (\n    getContentMatch(page, query) || matches.find((m) => m.headerIndex == null)\n  );\n}\n\nfunction getHeaderMatch(page, term) {\n  if (!page.headers) return null;\n  for (let i = 0; i < page.headers.length; i++) {\n    const h = page.headers[i];\n    const charIndex = h.normalizedTitle.indexOf(term);\n    if (charIndex === -1) continue;\n    return {\n      headerIndex: i,\n      charIndex,\n      termLength: term.length,\n    };\n  }\n  return null;\n}\n\nfunction getContentMatch(page, term) {\n  if (!page.normalizedContent) return null;\n  const charIndex = page.normalizedContent.indexOf(term);\n  if (charIndex === -1) return null;\n\n  return { headerIndex: null, charIndex, termLength: term.length };\n}\n\nfunction getContentStr(page, match) {\n  const snippetLength = 120;\n  const { charIndex, termLength } = match;\n\n  let lineStartIndex = page.content.lastIndexOf(\"\\n\", charIndex);\n  let lineEndIndex = page.content.indexOf(\"\\n\", charIndex);\n\n  if (lineStartIndex === -1) lineStartIndex = 0;\n  if (lineEndIndex === -1) lineEndIndex = page.content.length;\n\n  const line = page.content.slice(lineStartIndex, lineEndIndex);\n  const lineCharIndex = charIndex - lineStartIndex;\n  const contentHighlight = [lineCharIndex, termLength];\n\n  if (snippetLength >= line.length)\n    return { contentStr: line, contentHighlight };\n\n  const additionalCharactersFromStart = _.round(\n    (snippetLength - termLength) / 2\n  );\n  const snippetStart = Math.max(\n    lineCharIndex - additionalCharactersFromStart,\n    0\n  );\n  const snippetEnd = Math.min(snippetStart + snippetLength, line.length);\n  let contentStr = line.slice(snippetStart, snippetEnd);\n  contentHighlight[0] = contentHighlight[0] - snippetStart;\n\n  if (snippetStart > 0) {\n    contentStr = \"...\" + contentStr;\n    contentHighlight[0] = contentHighlight[0] + 3;\n  }\n  if (snippetEnd < line.length) contentStr = contentStr + \"...\";\n  return {\n    contentStr,\n    contentHighlight,\n  };\n}\n\nfunction normalizeString(str) {\n  if (!str) return str;\n  return str\n    .trim()\n    .toLowerCase()\n    .normalize(\"NFD\")\n    .replace(/[\\u0300-\\u036f]/g, \"\");\n}\n"]}]}